---
title: 2. Workshop Docker
draft: true
---

## Opdracht 1: Dockerfile backend
In deze opdracht maak je een docker file aan voor een demo project en wordt deze gerund, zodat een docker image en container draaien op docker desktop.

**Stap 1:** Download het demo project (LINK)

**Stap 2** Maak een document aan in het project met de naam `Dockerfile` 

**Stap 3:** Navigeer naar de root van je project

**Stap 4:** Haal de docker image op voor de basis dotnet versie 8.0 door de volgende line toe tevoegen aan de dockerfile:
```Dockerfile
FROM mcr.microsoft.com/dotnet/sdk:8.0 AS build-env 
```
- `AS build-env` is een referentie die later gebruikt kan worden

**Stap 5:** Geef aan welke directory gebruikt moet worden binnen de container waarin alles gebeurd. Voeg de volgende line toe aan de dockerfile:
```Dockerfile
WORKDIR /App 
```

**Stap 6:** Kopieer alle documenten uit de huidige directory naar de huidige directory in de container. Voeg de volgende line toe aan de dockerfile:
```Dockerfile
COPY . ./ 
```

**Stap 7:** restored alle dependencies en tools van dotnet, run het project en zet dit in een directory genaamd "out". Voeg de volgende lines toe aan de dockerfile:
```Dockerfile
RUN dotnet restore 
RUN dotnet publish -c Release -o out 
```

**Stap 8:** Maak nog een dotnet container aan en zet de working directory op een locatie. Voeg de volgende line toe aan de dockerfile:
```Dockerfile
FROM mcr.microsoft.com/dotnet/aspnet:8.0 
WORKDIR /App 
```

**Stap 9:** Kopieer de out map van de build-env. Voeg de volgende line toe aan de dockerfile:
```Dockerfile
COPY --from=build-env /App/out . 
```


**Stap 10:** Geef aan welk commando gerund moet worden voor het opstarten van het project. Voeg de volgende line toe aan de dockerfile:
```Dockerfile
ENTRYPOINT ["dotnet", "DotNet.Docker.dll"]
```

**Stap 11:** Run een docker commando. Voeg de volgende line toe aan de dockerfile:
```bash
docker build -t my-dotnet-app .
docker run -d -p 8080:80 --name my-dotnet-container my-dotnet-app
```
- In deze commando wordt '.' gebruikt om aan te geven dat de bestanden van de huidige map gebruikt moeten worden

> [!edit]- Antwoord
> ```
> FROM mcr.microsoft.com/dotnet/sdk:8.0 AS build-env 
> WORKDIR /App 
> COPY . ./  
> RUN dotnet restore 
> RUN dotnet publish -c Release -o out 
> FROM mcr.microsoft.com/dotnet/aspnet:8.0 
> WORKDIR /App 
> COPY --from=build-env /App/out . 
> ENTRYPOINT ["dotnet", "DotNet.Docker.dll"]
> ```

## Opdracht 2: Dockerfile frontend

**Stap 1:** Download het demo project (LINK)

**Stap 2** Maak een document aan in het project met de naam `Dockerfile` 

**Stap 3:** Navigeer naar de root van je project

**Stap 4:** Haal de base image op van Node en voeg dit toe aan de dockerfile
```Dockerfile
FROM nginx
```

**stap 5:** Kopieer de content naar de juiste directory voor de docker image door de volgende line toe te voegen
```Dockerfile
COPY /content /usr/share/nginx/html
```

**Stap 6:** Geef aan welke directory gebruikt moet worden binnen de container waarin alles gebeurd. Voeg de volgende line toe aan de dockerfile:
```Dockerfile
WORKDIR /app 
```

**Stap 7:** Voeg de app toe aan de working directory met de volgende line in de dockerfile
```Dockerfile
COPY . ./ 
```

**Stap 8:** Run het volgende commando om de docker image mee op te starten
```bash
docker build -t frontend-workshop .
docker run -d -p 4000:80 --name docker-workshop-frontend frontend-workshop
```

> [!warning]- Antwoord
> ```
> FROM nginx
> COPY /content /usr/share/nginx/html
> WORKDIR /app
> COPY . ./
> ```

## Opdracht 3: Docker compose

**Stap 1:** Maak een `docker-compose.yml` document aan.


**Stap 2:** Bouw de docker compose op aan de hand van de uitleg in [[5. Docker compose|Docker Compose]].

**Stap 3:** 




