---
title: ZAP
draft: "true"
---
## Pentesting

Het testen van de security van een applicatie heeft als doel om er achter te komen waar mogelijke risico's en zwaktes zitten. Een onderdeel hiervan is penetration testing, ook bekend als pentesting. Pentesting houdt in dat je je voordoet als een mogelijke aanvaller van de applicatie. Je probeert door middel van bekende aanvallen risico's te ontdekken of zwakheden te benutten. Pentesting is onderdeel van de testing fase in de SSDLC.

Pentesting bestaat uit de volgende 3 stappen:

1. **Ontdekken** - Het verzamelen van informatie over de website. Denk hierbij aan alle bestaande URL's, robots.txt, externe frameworks en packages, de gebruikte webserver met versie.

2. **Aanvallen** - Het uitvoeren van aanvallen aan de hand van de ontdekte informatie.

3. **Rapporteren** - Het rapporteren en beschrijven van de gevonden veiligheidsrisico's

## ZAP

Pentesting kan zowel handmatig, als automatisch gedaan worden. Er bestaan vele tools om dit te automatiseren. Bij de bronnenlijst van deze pagina zijn er aantal te vinden, maar deze pagina gaat in op het gebruik van ZAP.

ZAP staat voor "Zed Attack Proxy" en is een gratis en open source tool gemaakt voor het testen van web-applicaties. ZAP wordt omschreven als een Man-in-the-middle proxy, omdat het tussen de browser en de web-applicatie inzit. Het kan gemakkelijk requests en responses inzien, vasthouden en wijzigen.

## Ontdekken

De eerste stap is het ontdekken van de webapplicatie. ZAP heeft hier een aantal tools voor.

### Spiders

ZAP heeft 2 spiders voor het in kaart brengen van web applicaties. De traditionele spider begint met een aantal start-URLs en ontdekt meer URLs door recursief de HTML in responses van de webapplicatie te onderzoeken.

Tijdens het verwerken van een URL, maakt de spider een request om de bijbehorende resource op te halen en verwerkt de response om nieuwe hyperlinks te ontdekken. In de [documentatie van ZAP](https://www.zaproxy.org/docs/desktop/addons/spider/) is te vinden welke tags er worden geanalyseerd.

De traditionele spider is snel, maar is niet altijd effectief wanneer er URLs worden gegenereerd door JavaScript. Voor AJAX applicaties, is de AJAX spider effectiever. Deze spider onderzoekt de web applicatie door browsers te creëren die dan elke mogelijke URL op de pagina volgen. De AJAX spider is langzamer dan de traditionele spider.

Beide spiders voeren alleen passieve scans op de web-applicatie uit. Passieve scans wijzigen geen responses en zijn veilig om uit te voeren. Passief scannen is een goede manier om sommige zwakheden te vinden en om een basis overzicht te krijgen in hoe veilig de webapplicatie is. Ook kan het helpen om inzicht te krijgen op welke plekken verder getest moet worden.

### Force browse

De force browse add-on bevat een lijst aan veelvoorkomende URLs en probeert ze allemaal te bezoeken. Als de URL een niet-404 response teruggeeft wordt de URL opgeslagen. Denk hierbij aan URLs als `http://example.com/admin.php`, `http://example.com/logs` en `http://example.com/passwd.bak`. Omdat dit een brute-force process is kan het, afhankelijk van de lengte van de lijst, veel tijd in beslag nemen.

### HUD

De derde methode is om via de HUD handmatig de webapplicatie te ontdekken. Hierbij kan je zoals je dit normaalgesproken in de browser doet je website bezoeken en worden alle ingeladen en bezochte URLs opgeslagen. Dit kan het makkelijker maken om bijvoorbeeld een ingelogde pagina te indexen, of een pagina bezoeken waar niet rechtstreeks naar gelinkt wordt. (Voor de AJAX spider is het ook mogelijk om ingelogde pagina's te bezoeken, maar hier is extra configuratie voor nodig).

## Aanvallen

Nu je weet hoe de applicatie er uit ziet, welke resources er ingeladen worden en welke pagina's je kunt bezoeken, is de tweede stap in het pentesting process het aanvallen van de applicatie. Ook hier biedt ZAP meerdere tools voor aan.

⚠️ Let op: het starten van deze tools start een daadwerkelijke aanval op de website. Doe dit alleen op websites waar je expliciete toestemming hebt om deze aan te vallen.

### Active scan

Active scannen probeert mogelijke zwakheden te vinden door bekende aanvallen tegen de ontdekte targets te gebruiken. Denk hierbij aan SQL Injection, Cross Site Scripting en het zoeken naar verborgen bestanden. De volledige lijst aan active scan rules zijn te vinden in de [documentatie van ZAP](https://www.zaproxy.org/docs/desktop/addons/active-scan-rules/).

### Fuzzer

Fuzzing is een techniek waarbij er onverwachts veel data naar een target wordt gestuurd. Dit is meestal ongeldige data.

## Rapporteren

TODO

## Bronnen

TODO: APA maken

- <https://www.zaproxy.org/getting-started/>
- <https://en.wikipedia.org/wiki/Penetration_test>
- <https://owasp.org/www-community/Vulnerability_Scanning_Tools>

TODO:

- screenshots
  - breakpoints
  - requests wijzigen
  - Instellingen
- Per onderdeel (van de workshop screenshot) beschrijven wat je ermee kan
- Basis uitleg van zap meer en dieper
  - Proxies (hoe deze werken, nut)
- Gevaar van ZAP
  - Active scan
- Bekende fouten
  - Niet zichtbare HUD
- Wat kan je met een rapport / hoe zet je het in het verslag
- Hoe analyseer je het rapport
- Begrippenlijst
